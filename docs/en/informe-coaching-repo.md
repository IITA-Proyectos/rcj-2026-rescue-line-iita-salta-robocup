<!-- AUTO-GENERATED FILE – DO NOT EDIT.
     Source: docs/es (Spanish is source of truth)
     This file is generated by GitHub Actions.
-->

# Repository Coaching Report (RCJ Rescue Line) — IITA Salta

**Creation Date:** 2026-02-23 (America/Argentina/Salta)  
**Created by:** AI ChatGPT 5.2 (GPT-5.2 Pro)  
**At the request of:** Gustavo Viollaz  
**Analyzed repository:** `IITA-Proyectos/rcj-2026-rescue-line-iita-salta-robocup` (branch `main`)  
**Repo standard:** ICRS v1.1 L2 (`AI-INSTRUCTIONS.md`)  
**Language:** This document lives in `docs/es/` (Spanish = source). `docs/en/` is auto-generated mirror (**DO NOT EDIT**).

---

## Objective

This report is a technical-professional review of the repository and the project's status, focusing on:

- **Competition**: RoboCupJunior Rescue Line (baseline: rules 2025; note: drafts for 2026 exist).
- **Competitive performance**: robustness, repeatability, timing, and failure control.
- **TDP / Documentation**: evidence and typical artifacts required by templates/rubrics (TDP, BOM, technical video, poster).
- **Best practices**: what strong teams tend to do (engineering + testing + traceability).

> Important: this audit is based on what is visible at the time of the review (2026-02-23). If files were added later (e.g., in `hardware/` or `testing/`), this report must be updated.

---

## Applied Standardization (repo conventions)

According to the README and `AI-INSTRUCTIONS.md`, the documentation is organized as follows:

- `docs/es/`: source documentation in Spanish (truth).
- `docs/en/`: auto-generated mirror in English (**do not edit**).
- Suggested convention for file names: **kebab-case** in lowercase (e.g.: `yolo-raspberry.md`).
- Change process: **every change should originate from an Issue** and enter via PR (see `CONTRIBUTING.md` and `AI-INSTRUCTIONS.md`).

**Recommended name and location for this report:**
- ✅ `docs/es/informe-coaching-repo.md` (this file)

---

## Executive Summary (the most important in 2 minutes)

### Strengths (signals of a “serious” team)
1. **Repository with clear ICRS structure** (software/hardware/docs/testing/journal/research/competition/project).  
2. **Well-defined dual processor architecture**: Teensy (real-time) + Raspberry Pi (vision/AI).  
3. **Useful existing technical documentation** (RPi↔Teensy communications, YOLO on Raspberry, firmware libraries).  
4. **Industry-style contribution rules** (Conventional Commits, PR with evidence, declaration of AI usage).

### Areas for Improvement (what often separates “doing” from “winning”)
1. **Work traceability**: the repo shows 0 Issues → lacks a “playable” backlog (tasks, responsibilities, dates, risks).  
2. **Testing evidence with results**: `testing/` is declared, but there is no clearly accessible index/test table.  
3. **TDP readiness**: for high scores, often missing (or not one click away): electrical diagram/power tree, schematics/PCB, official BOM, CAD with measurements, physical location of sensors, and performance metrics.

### Detected Competitive Technical Risks (high priority)
- String comparison by pointer in `drivebase.cpp` (likely bug).
- Possible mixing of units mm/cm in distance control.
- Logic with `delay()` / blocking loops in firmware: latency and event loss.

---

## Reviewed Evidence (internal links)

Key existing documents:
- `docs/es/comunicacion-rpi-teensy.md`
- `docs/es/yolo-raspberry.md`
- `docs/es/librerias-firmware.md`

Repo policies:
- `README.md` (structure, robot, links to docs)
- `CONTRIBUTING.md` (commits/branches/PRs/AI)
- `AI-INSTRUCTIONS.md` (ICRS and process rules)

Code with relevant signals:
- `software/teensy/firmware/src/main.cpp`
- `software/teensy/firmware/lib/drivebase/drivebase.cpp`
- `software/teensy/firmware/lib/claw/claw.h`

---

## Evaluation by Area

### 1) Process and Management (what the repo “says” vs what “is seen”)

**What the repo says should be done (very well):**
- All work originates from an **Issue**.
- Changes enter via PR with **testing evidence**.
- AI usage is declared.

**What is currently observed:**
- “Issues” tab at 0 → **gap between ideal process and real practice**.

**Concrete recommendation (action):**
- Activate a minimum flow:
  - 1 Issue per feature (e.g.: “Fix ToF units”, “Non-blocking FSM”, “Testing gaps table”).
  - labels: `bug`, `enhancement`, `docs`, `hardware`, `testing`, `competition`.
  - milestones: “Roboliga / Regional / National / World”.

> Winning teams are not differentiated by “ideas”: they are differentiated by having a system that makes ideas reach the track and remain stable.

---

### 2) Documentation and TDP (how ready they are for the grid)

#### 2.1 What is already strong
- **Communications** documented with table and bytes (good for TDP).
- **Vision pipeline** explained (better if metrics are added).
- **Dependencies** and libraries listed (reduces judge questions).

#### 2.2 What is missing (or not visible/1 click away)
For TDP and typical rubrics, it is missing to consolidate in one place:

**Hardware**
- Block diagram of the robot (high level).
- Electrical diagram + “power tree” (battery → regulators → loads).
- Schematics/PCB (PDF + source).
- Physical layout of sensors (photo + drawing + measurements).
- Complete BOM using the **official template**.

**Software**
- State diagram (line/rescue/deposit) in graphic (flowchart).
- Description of algorithms (line, greens, gaps, obstacles, rescue) with “edge cases”.
- Configuration and calibration (what parameters exist and how they are adjusted).

**Testing**
- Test table + results (success %, time, failure modes).
- Videos/internal links by feature.
- Logs (even if CSV) by run to compare improvements.

---

### 3) Teensy Firmware (robustness and control)

#### 3.1 Strengths
- Modular structure (`drivebase`, `claw`, PID, sensors).
- Competitive sensor suite (IMU, ToF, color, ultrasonic, encoders).
- Clear state machine at the intention level.

#### 3.2 Risks / likely bugs (high priority)

**(A) Incorrect string comparison**
In `software/teensy/firmware/lib/drivebase/drivebase.cpp`, a pattern is observed:
- `if (this->id == "FL" || this->id == "BL") ...`

In C/C++, this compares **pointers**, not content. It is a classic bug that may “work” by chance and then break.

✅ Recommendation:
- replace with `strcmp(id, "FL")==0` or, better, use `enum MotorID`.

**(B) Units mm vs cm**
In `src/main.cpp`, readings `readRangeContinuousMillimeters()` (mm) are used, but constants commented in cm.
If units are mixed, control becomes erratic (over-correction or slowness).

✅ Recommendation:
- Define a single unit (mm recommended) and normalize everything in `config.h`.

**(C) Blocking / delays**
`while(routine==...)` loops with `delay()` and long actions make the robot slow to react and may degrade serial communication.

✅ Recommendation:
- Non-blocking FSM by “ticks” using `millis()`/`elapsedMillis`.

---

### 4) Raspberry Pi (vision + AI)

#### 4.1 Strengths
- Use of ONNX Runtime + ultralytics (on CPU) is a valid path if measured.
- Multithreading / separation of capture and inference (according to docs).

#### 4.2 Competitive recommendation (what strong teams do)
Measure and record, as if it were Formula 1 telemetry:
- Real FPS (average and percentiles).
- Inference latency (ms).
- Correct detection rate (by class) in real track.
- Robustness to lighting (cold/warm, shadows, reflections, dirty camera).

Without numbers, AI often feels “magical” until the competition day when it stops being so.

---

## 5) Testing and Evidence

**Current status:**
- The repo structure includes `testing/`, but no `testing/README.md` was found to act as an index.
- In `CONTRIBUTING.md`, evidence in PR is required (very good).

**Minimum recommendation (high return):**
Create `testing/README.md` with a simple table:

| Feature | Setup | Metric | Result | Evidence | Date |
|---|---|---|---|---|---|

And within `testing/`:
- `videos/` (short mp4s by feature)
- `logs/` (CSV)
- `photos/` (setup)

---

## TDP Checklist (to transform the repo into “TDP-ready”)

> This list is intended as a production checklist. It does not discuss theory: it aims at what the judge can quickly evaluate.

### Hardware Section
- [ ] Block diagram of the system (Teensy/RPi/sensors/actuators).
- [ ] Electrical diagram / power tree.
- [ ] Schematic (PDF + source).
- [ ] PCB (if exists) + revisions (`rev-a`, `rev-b`).
- [ ] Photos of the robot (4 views) + dimensions.
- [ ] Sensor locations (photo + drawing + distances).
- [ ] Complete BOM (in official template) + suppliers + costs.

### Software Section
- [ ] Architecture (what runs on Teensy vs RPi).
- [ ] State machine (flowchart).
- [ ] Key algorithms and “edge cases”.
- [ ] Parameters / calibration (how, when, with what criteria).
- [ ] Failure management (timeouts, safe modes).

### Validation Section
- [ ] Test plan (feature vs conditions matrix).
- [ ] Quantitative results (success %, times).
- [ ] Videos by feature.
- [ ] Change log: “change → measured improvement”.

---

## Recommended Work Plan (sprints)

### Sprint 1 — Stability (avoid losing rounds due to bugs)
- Fix strings / units / non-blocking FSM.
- RPi↔Teensy communication watchdog.
- Minimum logging (build + parameters + result).

### Sprint 2 — Track Coverage (rules)
- Gaps, greens, obstacles, ramps/seesaw (as available).
- Test table with metrics.

### Sprint 3 — Repeatable Rescue
- Pickup + deposit with measurable success rate.
- Reduction of false positives in vision.

### Sprint 4 — Final Documentation (TDP)
- Consolidate hardware + software + testing into a TDP that “is easy to read”.

---

## Suggested Next Steps (to comply with repo process)

To upload this document correctly according to the repo rules:
1. Create an Issue: “Add repository coaching report”.
2. Create branch: `docs/informe-coaching-repo`.
3. Commit (Conventional Commits): `docs(docs): add repo coaching report`
4. PR with:
   - change summary (adds document),
   - AI declaration (ChatGPT 5.2),
   - link to the Issue.

---

## External Sources (reference)

- RoboCupJunior Rescue Line 2025 Rules (PDF):  
  https://junior.robocup.org/wp-content/uploads/2025/02/RCJRescueLine2025-final-1.pdf

- RoboCupJunior Rescue League — Documents (TDP Template / Rubrics / BOM):  
  https://rescue.rcj.cloud/documents

- RoboCupJunior Rescue Line (general page):  
  https://junior.robocup.org/rcj-rescue-line/

- (Context) Draft Rules 2026 (may change):  
  https://junior.robocup.org/wp-content/uploads/2026/01/RCJRescueLine2026-draft.pdf